<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <meta name="Description" content="An event-driven networking engine written in Python and MIT licensed." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Symbolic Constants &mdash; Twisted 15.4.0 documentation</title>
    <link rel="stylesheet" href="../../_static/twistedtrac.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '15.4.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Twisted 15.4.0 documentation" href="../../index.html" />
    <link rel="up" title="Developer Guides" href="index.html" />
    <link rel="next" title="twisted.enterprise.adbapi: Twisted RDBMS support" href="rdbms.html" />
    <link rel="prev" title="Twisted’s Legacy Logging System: twisted.python.log" href="logging.html" /> 
    
<!-- Can stuff between these comments go? -->
        <link rel="search" href="/trac/search" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="/trac/wiki/Documentation?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="start" href="/trac/wiki" />

        
    <script type="text/javascript" src="/trac/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/trac/chrome/common/js/trac.js"></script><script type="text/javascript" src="/trac/chrome/common/js/search.js"></script>
    
    <!-- the following script tag is a holdover frome Trac, which shouldn't be needed in Sphinx
    <script type="text/javascript">
      $(document).ready(function() {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    -->
<!-- Can stuff between these comments go? -->

  </head>
  
  
<body>

<div id="banner">
<div id="top_grad">
         
</div>
<div id="tab">
        <a href="http://twistedmatrix.com/trac/wiki">HOME</a>
    <a href="http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions">FAQ</a>
    <a href="/">DOCS</a>
    <a href="http://twistedmatrix.com/trac/wiki/Downloads">DOWNLOAD</a>

</div>
      <div id="header">
        <a id="logo" href="http://twistedmatrix.com/trac/"><img src="../../_static/trac_banner.png" alt="Twisted" /></a>
      </div>
      <!-- taking this out for now, but might use 
           the space for something else later 
      -->
      <!--
      <form id="topsearch" action="/trac/search" method="get"><div>
        <label for="proj-search">Search:</label>
        <input type="text" id="proj-search" name="q" size="10" value="" />
        <input type="submit" value="Search" />
        <input type="hidden" name="wiki" value="on" />

        <input type="hidden" name="changeset" value="on" />
        <input type="hidden" name="ticket" value="on" />
      </div></form>
      -->
      <div id="metanav" class="nav">
    <ul>
      <li> </li>
      <!-- taking this out for now, but might use 
           the space for something else later 
      -->
      <!--
      <li class="first">logged in as khorn</li><li class=""><a href="/trac/logout">Logout</a></li><li class=""><a href="/trac/wiki/TracGuide">Help/Guide</a></li><li class=""><a href="/trac/about">About Trac</a></li><li class="last"><a href="/trac/account">My Account</a></li>
      -->
    </ul>
  </div>
    </div>

<!-- mainnav -->
    <div id="mainnav" class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="rdbms.html" title="twisted.enterprise.adbapi: Twisted RDBMS support"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="logging.html" title="Twisted’s Legacy Logging System: twisted.python.log"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Twisted 15.4.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Twisted Core</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Developer Guides</a> &raquo;</li> 
      </ul>
    </div>

    <div id="main">
    <div id="ctxtnav" class="nav">
      <h2>Wiki Navigation</h2>
      <ul>
        <li>
        
        </li>
        <!-- taking this out for now, but might use 
             the space for something else later 
        -->
        <!--
        <li><a href="/trac/wiki/WikiStart">Start Page</a></li>
        <li><a href="/trac/wiki/TitleIndex">Index by Title</a></li>

        <li><a href="/trac/wiki/RecentChanges">Index by Date</a></li>
        <li class="last">
          <a href="/trac/wiki/Documentation?action=diff&amp;version=15">Last Change</a>
        </li>
        -->
      </ul>
      <hr />
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div id="current-docs-container" style="display: none">
            <em>
              <a id="current-docs-link">
                Go to the latest version of this document.
              </a>
            </em>
          </div>
          <div class="body">
            
  <div class="section" id="symbolic-constants">
<h1>Symbolic Constants<a class="headerlink" href="#symbolic-constants" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>It is often useful to define names which will be treated as constants.
<a class="api reference external" href="https://twistedmatrix.com/documents/15.4.0/api/twisted.python.constants.html">twisted.python.constants</a> provides APIs for defining such symbolic constants with minimal overhead and some useful features beyond those afforded by the common Python idioms for this task.</p>
<p>This document will explain how to use these APIs and what circumstances they might be helpful in.</p>
</div>
<div class="section" id="constant-names">
<h2>Constant Names<a class="headerlink" href="#constant-names" title="Permalink to this headline">¶</a></h2>
<p>Constants which have no value apart from their name and identity can be defined by subclassing <a class="api reference external" href="https://twistedmatrix.com/documents/15.4.0/api/twisted.python.constants.Names.html">Names</a> .
Consider this example, in which some HTTP request method constants are defined.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">NamedConstant</span><span class="p">,</span> <span class="n">Names</span>
<span class="k">class</span> <span class="nc">METHOD</span><span class="p">(</span><span class="n">Names</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constants representing various HTTP request methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">GET</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
    <span class="n">PUT</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
    <span class="n">POST</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
    <span class="n">DELETE</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
</pre></div>
</div>
<p>Only direct subclasses of <code class="docutils literal"><span class="pre">Names</span></code> are supported (i.e., you cannot subclass <code class="docutils literal"><span class="pre">METHOD</span></code> to add new constants the collection).</p>
<p>Given this definition, constants can be looked up by name using attribute access on the <code class="docutils literal"><span class="pre">METHOD</span></code> object:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; METHOD.GET
<span class="go">&lt;METHOD=GET&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; METHOD.PUT
<span class="go">&lt;METHOD=PUT&gt;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>If it&#8217;s necessary to look up constants from a string (e.g. based on user input of some sort), a safe way to do it is using <code class="docutils literal"><span class="pre">lookupByName</span></code> :</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; METHOD.lookupByName<span class="o">(</span><span class="s1">&#39;GET&#39;</span><span class="o">)</span>
<span class="go">&lt;METHOD=GET&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; METHOD.lookupByName<span class="o">(</span><span class="s1">&#39;__doc__&#39;</span><span class="o">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">  File &quot;twisted/python/constants.py&quot;, line 145, in lookupByName</span>
<span class="go">    raise ValueError(name)</span>
<span class="go">ValueError: __doc__</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>As demonstrated, it is safe because any name not associated with a constant (even those special names initialized by Python itself) will result in <code class="docutils literal"><span class="pre">ValueError</span></code> being raised, not some other object not intended to be used the way the constants are used.</p>
<p>The constants can also be enumerated using the <code class="docutils literal"><span class="pre">iterconstants</span></code> method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; list<span class="o">(</span>METHOD.iterconstants<span class="o">())</span>
<span class="go">[&lt;METHOD=GET&gt;, &lt;METHOD=PUT&gt;, &lt;METHOD=POST&gt;, &lt;METHOD=DELETE&gt;]</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Constants can be compared for equality or identity:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; METHOD.GET is METHOD.GET
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; METHOD.GET <span class="o">==</span> METHOD.GET
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; METHOD.GET is METHOD.PUT
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt; METHOD.GET <span class="o">==</span> METHOD.PUT
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Ordered comparisons (and therefore sorting) also work.
The order is defined to be the same as the instantiation order of the constants:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">NamedConstant</span><span class="p">,</span> <span class="n">Names</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Letters</span><span class="p">(</span><span class="n">Names</span><span class="p">):</span>
<span class="gp">... </span>  <span class="n">a</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
<span class="gp">... </span>  <span class="n">b</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
<span class="gp">... </span>  <span class="n">c</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Letters</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">Letters</span><span class="o">.</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">Letters</span><span class="o">.</span><span class="n">c</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Letters</span><span class="o">.</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">Letters</span><span class="o">.</span><span class="n">b</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">([</span><span class="n">Letters</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">Letters</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">Letters</span><span class="o">.</span><span class="n">c</span><span class="p">])</span>
<span class="go">[&lt;Letters=a&gt;, &lt;Letters=b&gt;, &lt;Letters=c&gt;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>A subclass of <code class="docutils literal"><span class="pre">Names</span></code> may define class methods to implement custom functionality.
Consider this definition of <code class="docutils literal"><span class="pre">METHOD</span></code> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">NamedConstant</span><span class="p">,</span> <span class="n">Names</span>
<span class="k">class</span> <span class="nc">METHOD</span><span class="p">(</span><span class="n">Names</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constants representing various HTTP request methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">GET</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
    <span class="n">PUT</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
    <span class="n">POST</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>
    <span class="n">DELETE</span> <span class="o">=</span> <span class="n">NamedConstant</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">isIdempotent</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if the given method is side-effect free, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">method</span> <span class="ow">is</span> <span class="n">cls</span><span class="o">.</span><span class="n">GET</span>
</pre></div>
</div>
<p>This functionality can be used as any class methods are used:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; METHOD.isIdempotent<span class="o">(</span>METHOD.GET<span class="o">)</span>
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; METHOD.isIdempotent<span class="o">(</span>METHOD.POST<span class="o">)</span>
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
</div>
<div class="section" id="constants-with-values">
<h2>Constants With Values<a class="headerlink" href="#constants-with-values" title="Permalink to this headline">¶</a></h2>
<p>Constants with a particular associated value are supported by the <a class="api reference external" href="https://twistedmatrix.com/documents/15.4.0/api/twisted.python.constants.Values.html">Values</a> base class.
Consider this example, in which some HTTP status code constants are defined.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">ValueConstant</span><span class="p">,</span> <span class="n">Values</span>
<span class="k">class</span> <span class="nc">STATUS</span><span class="p">(</span><span class="n">Values</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constants representing various HTTP status codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">OK</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">)</span>
    <span class="n">FOUND</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;302&quot;</span><span class="p">)</span>
    <span class="n">NOT_FOUND</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;404&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As with <code class="docutils literal"><span class="pre">Names</span></code> , constants are accessed as attributes of the class object:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; STATUS.OK
<span class="go">&lt;STATUS=OK&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.FOUND
<span class="go">&lt;STATUS=FOUND&gt;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Additionally, the values of the constants can be accessed using the <code class="docutils literal"><span class="pre">value</span></code> attribute of one these objects:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; STATUS.OK.value
<span class="go">&#39;200&#39;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>As with <code class="docutils literal"><span class="pre">Names</span></code> , constants can be looked up by name:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; STATUS.lookupByName<span class="o">(</span><span class="s1">&#39;NOT_FOUND&#39;</span><span class="o">)</span>
<span class="go">&lt;STATUS=NOT_FOUND&gt;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Constants on a <code class="docutils literal"><span class="pre">Values</span></code> subclass can also be looked up by value:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; STATUS.lookupByValue<span class="o">(</span><span class="s1">&#39;404&#39;</span><span class="o">)</span>
<span class="go">&lt;STATUS=NOT_FOUND&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.lookupByValue<span class="o">(</span><span class="s1">&#39;500&#39;</span><span class="o">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">  File &quot;twisted/python/constants.py&quot;, line 244, in lookupByValue</span>
<span class="go">      raise ValueError(value)</span>
<span class="go">ValueError: 500</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Multiple constants may have the same value.
If they do, <code class="docutils literal"><span class="pre">lookupByValue</span></code> will find the one which is defined first.</p>
<p>Iteration is also supported:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; list<span class="o">(</span>STATUS.iterconstants<span class="o">())</span>
<span class="go">[&lt;STATUS=OK&gt;, &lt;STATUS=FOUND&gt;, &lt;STATUS=NOT_FOUND&gt;]</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Constants can be compared for equality, identity and ordering:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; STATUS.OK <span class="o">==</span> STATUS.OK
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.OK is STATUS.OK
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.OK is STATUS.NOT_FOUND
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.OK <span class="o">==</span> STATUS.NOT_FOUND
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.NOT_FOUND &gt; STATUS.OK
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.FOUND &lt; STATUS.OK
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Note that like <code class="docutils literal"><span class="pre">Names</span></code> , <code class="docutils literal"><span class="pre">Values</span></code> are ordered by instantiation order, not by value, though either order is the same in the above example.</p>
<p>As with <code class="docutils literal"><span class="pre">Names</span></code> , a subclass of <code class="docutils literal"><span class="pre">Values</span></code> can define custom methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">ValueConstant</span><span class="p">,</span> <span class="n">Values</span>
<span class="k">class</span> <span class="nc">STATUS</span><span class="p">(</span><span class="n">Values</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constants representing various HTTP status codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">OK</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;200&quot;</span><span class="p">)</span>
    <span class="n">NO_CONTENT</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;204&quot;</span><span class="p">)</span>
    <span class="n">NOT_MODIFIED</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;304&quot;</span><span class="p">)</span>
    <span class="n">NOT_FOUND</span> <span class="o">=</span> <span class="n">ValueConstant</span><span class="p">(</span><span class="s">&quot;404&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">hasBody</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if the given status is associated with a response body,</span>
<span class="sd">        False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">NO_CONTENT</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">NOT_MODIFIED</span><span class="p">)</span>
</pre></div>
</div>
<p>This functionality can be used as any class methods are used:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; STATUS.hasBody<span class="o">(</span>STATUS.OK<span class="o">)</span>
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; STATUS.hasBody<span class="o">(</span>STATUS.NO_CONTENT<span class="o">)</span>
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
</div>
<div class="section" id="constants-as-flags">
<h2>Constants As Flags<a class="headerlink" href="#constants-as-flags" title="Permalink to this headline">¶</a></h2>
<p>Integers are often used as a simple set for constants.
The values for these constants are assigned as powers of two so that bits in the integer can be set to represent them.
Individual bits are often called <em>flags</em> .
<a class="api reference external" href="https://twistedmatrix.com/documents/15.4.0/api/twisted.python.constants.Flags.html">Flags</a> supports this use-case, including allowing constants with particular bits to be set, for interoperability with other tools.</p>
<p>POSIX filesystem access control is traditionally done using a bitvector defining which users and groups may perform which operations on a file.
This state might be represented using <code class="docutils literal"><span class="pre">Flags</span></code> as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">FlagConstant</span><span class="p">,</span> <span class="n">Flags</span>
<span class="k">class</span> <span class="nc">Permission</span><span class="p">(</span><span class="n">Flags</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constants representing user, group, and other access bits for reading,</span>
<span class="sd">    writing, and execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">OTHER_EXECUTE</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">OTHER_WRITE</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">OTHER_READ</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">GROUP_EXECUTE</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">GROUP_WRITE</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">GROUP_READ</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">USER_EXECUTE</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">USER_WRITE</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
    <span class="n">USER_READ</span> <span class="o">=</span> <span class="n">FlagConstant</span><span class="p">()</span>
</pre></div>
</div>
<p>As for the previous types of constants, these can be accessed as attributes of the class object:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; Permission.USER_READ
<span class="go">&lt;Permission=USER_READ&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; Permission.USER_WRITE
<span class="go">&lt;Permission=USER_WRITE&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; Permission.USER_EXECUTE
<span class="go">&lt;Permission=USER_EXECUTE&gt;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>These constant objects also have a <code class="docutils literal"><span class="pre">value</span></code> attribute giving their integer value:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; Permission.USER_READ.value
<span class="go">256</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>These constants can be looked up by name or value:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; Permission.lookupByName<span class="o">(</span><span class="s1">&#39;USER_READ&#39;</span><span class="o">)</span> is Permission.USER_READ
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; Permission.lookupByValue<span class="o">(</span>256<span class="o">)</span> is Permission.USER_READ
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Constants can also be combined using the logical operators <code class="docutils literal"><span class="pre">&amp;</span></code> (<em>and</em> ), <code class="docutils literal"><span class="pre">|</span></code> (<em>or</em> ), and <code class="docutils literal"><span class="pre">^</span></code> (<em>exclusive or</em> ).</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; Permission.USER_READ <span class="p">|</span> Permission.USER_WRITE
<span class="go">&lt;Permission={USER_READ,USER_WRITE}&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; <span class="o">(</span>Permission.USER_READ <span class="p">|</span> Permission.USER_WRITE<span class="o">)</span> <span class="p">&amp;</span> Permission.USER_WRITE
<span class="go">&lt;Permission=USER_WRITE&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; <span class="o">(</span>Permission.USER_READ <span class="p">|</span> Permission.USER_WRITE<span class="o">)</span> ^ Permission.USER_WRITE
<span class="go">&lt;Permission=USER_READ&gt;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>These combined constants can be deconstructed via iteration:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; <span class="nv">mode</span> <span class="o">=</span> Permission.USER_READ <span class="p">|</span> Permission.USER_WRITE
<span class="gp">&gt;</span>&gt;&gt; list<span class="o">(</span>mode<span class="o">)</span>
<span class="go">[&lt;Permission=USER_READ&gt;, &lt;Permission=USER_WRITE&gt;]</span>
<span class="gp">&gt;</span>&gt;&gt; Permission.USER_READ in mode
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; Permission.USER_EXECUTE in mode
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>They can also be inspected via boolean operations:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; Permission.USER_READ <span class="p">&amp;</span> mode
<span class="go">&lt;Permission=USER_READ&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; bool<span class="o">(</span>Permission.USER_READ <span class="p">&amp;</span> mode<span class="o">)</span>
<span class="go">True</span>
<span class="gp">&gt;</span>&gt;&gt; Permission.USER_EXECUTE <span class="p">&amp;</span> mode
<span class="go">&lt;Permission={}&gt;</span>
<span class="gp">&gt;</span>&gt;&gt; bool<span class="o">(</span>Permission.USER_EXECUTE <span class="p">&amp;</span> mode<span class="o">)</span>
<span class="go">False</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>The unary operator <code class="docutils literal"><span class="pre">~</span></code> (<em>not</em> ) is also defined:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; ~Permission.USER_READ
<span class="go">&lt;Permission={GROUP_EXECUTE,GROUP_READ,GROUP_WRITE,OTHER_EXECUTE,OTHER_READ,OTHER_WRITE,USER_EXECUTE,USER_WRITE}&gt;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Constants created using these operators also have a <code class="docutils literal"><span class="pre">value</span></code> attribute.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; <span class="o">(</span>~Permission.USER_WRITE<span class="o">)</span>.value
<span class="go">383</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>Note the care taken to ensure the <code class="docutils literal"><span class="pre">~</span></code> operator is applied first and the <code class="docutils literal"><span class="pre">value</span></code> attribute is looked up second.</p>
<p>A <code class="docutils literal"><span class="pre">Flags</span></code> subclass can also define methods, just as a <code class="docutils literal"><span class="pre">Names</span></code> or <code class="docutils literal"><span class="pre">Values</span></code> subclass may.
For example, <code class="docutils literal"><span class="pre">Permission</span></code> might benefit from a method to format a flag as a string in the traditional style.
Consider this addition to that class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.python</span> <span class="kn">import</span> <span class="n">filepath</span>
<span class="kn">from</span> <span class="nn">twisted.python.constants</span> <span class="kn">import</span> <span class="n">FlagConstant</span><span class="p">,</span> <span class="n">Flags</span>
<span class="k">class</span> <span class="nc">Permission</span><span class="p">(</span><span class="n">Flags</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">permissions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format permissions flags in the traditional &#39;rwxr-xr-x&#39; style.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">filepath</span><span class="o">.</span><span class="n">Permissions</span><span class="p">(</span><span class="n">permissions</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">shorthand</span><span class="p">()</span>
</pre></div>
</div>
<p>Use this like any other class method:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span>&gt;&gt; Permission.format<span class="o">(</span>Permission.USER_READ <span class="p">|</span> Permission.USER_WRITE <span class="p">|</span> Permission.GROUP_READ <span class="p">|</span> Permission.OTHER_READ<span class="o">)</span>
<span class="go">&#39;rw-r--r--&#39;</span>
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Symbolic Constants</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#constant-names">Constant Names</a></li>
<li><a class="reference internal" href="#constants-with-values">Constants With Values</a></li>
<li><a class="reference internal" href="#constants-as-flags">Constants As Flags</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="logging.html"
                                  title="previous chapter">Twisted&#8217;s Legacy Logging System: <code class="docutils literal"><span class="pre">twisted.python.log</span></code></a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="rdbms.html"
                                  title="next chapter">twisted.enterprise.adbapi: Twisted RDBMS support</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/core/howto/constants.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <p>
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                </p>
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    </div>
    <div id="footer"><hr />
      <div>

</div>
      <p class="left2">
        Site design<br />
        By <a href="http://huw.ugbox.net/">huw.wilkins.</a>

      </p>
      <p class="right"></p>
    </div>
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
          <!-- Give the user a link to this page, but in the current version of the docs. -->
          var link = document.getElementById('current-docs-link');
          link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+/, '/current');
          <!-- And make it visible -->
          var container = document.getElementById('current-docs-container');
          container.style.display = '';
          delete link;
          delete container;
      }
    </script>
  </body>
</html>